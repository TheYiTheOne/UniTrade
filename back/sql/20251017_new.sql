-- 创建数据库，如果不存在则新建
CREATE DATABASE IF NOT EXISTS UniTrade;
USE UniTrade;

-- =========================================
-- 1. 用户表（users）：存储系统用户的基本信息
-- =========================================
DROP TABLE IF EXISTS users;
CREATE TABLE users (
                       id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                       account VARCHAR(50) UNIQUE NOT NULL COMMENT '用户账号（唯一）',
                       password VARCHAR(100) NOT NULL COMMENT '用户密码（加密存储）',
                       name VARCHAR(50) NOT NULL COMMENT '用户姓名',
                       role_id INTEGER NOT NULL COMMENT '用户角色ID（对应roles表）',
                       create_time DATETIME NOT NULL COMMENT '创建时间',
                       update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='用户表，记录系统中所有用户信息';

-- =========================================
-- 2. 货品表（products）：存储商品的基本信息和价格
-- =========================================
DROP TABLE IF EXISTS products;
CREATE TABLE products (
                          id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                          name VARCHAR(100) UNIQUE NOT NULL COMMENT '商品名称（唯一）',
                          purchase_price DECIMAL(10,2) NOT NULL COMMENT '进货价',
                          wholesale_price DECIMAL(10,2) NOT NULL COMMENT '批发价',
                          retail_price DECIMAL(10,2) NOT NULL COMMENT '零售价',
                          create_time DATETIME NOT NULL COMMENT '创建时间',
                          update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='货品表，记录商品信息和价格';

-- =========================================
-- 3. 客户表（customers）：存储客户信息
-- =========================================
DROP TABLE IF EXISTS customers;
CREATE TABLE customers (
                           id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                           name VARCHAR(50) NOT NULL COMMENT '客户名称',
                           type INTEGER NOT NULL COMMENT '客户类型（如0=批发客户，1=零售客户）',
                           phone VARCHAR(20) NOT NULL COMMENT '联系电话',
                           address VARCHAR(200) NOT NULL COMMENT '联系地址',
                           create_time DATETIME NOT NULL COMMENT '创建时间',
                           update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='客户表，记录客户基本信息';

-- =========================================
-- 4. 仓库表（warehouses）：存储仓库信息
-- =========================================
DROP TABLE IF EXISTS warehouses;
CREATE TABLE warehouses (
                            id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                            name VARCHAR(100) NOT NULL COMMENT '仓库名称',
                            phone VARCHAR(20) NOT NULL COMMENT '仓库联系电话',
                            address VARCHAR(200) NOT NULL COMMENT '仓库地址',
                            create_time DATETIME NOT NULL COMMENT '创建时间',
                            update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='仓库表，记录仓库信息';

-- =========================================
-- 5. 库存表（inventory）：存储仓库中货品的库存数量
-- =========================================
DROP TABLE IF EXISTS inventory;
CREATE TABLE inventory (
                           id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                           product_id INT NOT NULL COMMENT '商品ID（关联products表）',
                           warehouse_id INT NOT NULL COMMENT '仓库ID（关联warehouses表）',
                           quantity INT NOT NULL DEFAULT 0 COMMENT '库存数量',
                           create_time DATETIME NOT NULL COMMENT '创建时间',
                           update_time DATETIME NOT NULL COMMENT '最后更新时间',
                           UNIQUE KEY unique_product_warehouse (product_id, warehouse_id) -- 确保同一商品在同一仓库只出现一次
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='库存表，记录每个仓库中每种货品的库存情况';

-- =========================================
-- 6. 销售单表（orders）：记录销售或采购订单信息
-- =========================================
DROP TABLE IF EXISTS orders;
CREATE TABLE orders (
                        id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                        customer_id INT NOT NULL COMMENT '客户ID（关联customers表）',
                        product_id INT NOT NULL COMMENT '商品ID（关联products表）',
                        warehouse_id INT NOT NULL COMMENT '仓库ID（关联warehouses表）',
                        quantity INT NOT NULL COMMENT '订单数量',
                        type INTEGER NOT NULL COMMENT '订单类型（如0=批发订单，1=零售订单）',
                        total_price DECIMAL(10,2) NOT NULL COMMENT '订单总价',
                        status INTEGER NOT NULL DEFAULT 0 COMMENT '订单状态（如0=草稿，1=已审核，2=已收款，3=已退货）',
                        create_time DATETIME NOT NULL COMMENT '创建时间',
                        update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='销售单表，记录销售订单详情';

-- =========================================
-- 7. 角色表（roles）：定义系统中的角色
-- =========================================
DROP TABLE IF EXISTS roles;
CREATE TABLE roles (
                       id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                       role_name VARCHAR(50) UNIQUE NOT NULL COMMENT '角色名称（唯一）',
                       create_time DATETIME NOT NULL COMMENT '创建时间',
                       update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='角色表，定义系统中不同角色（如经理、店长、店员等）';

-- =========================================
-- 8. 权限表（permissions）：定义系统中可分配的权限
-- =========================================
DROP TABLE IF EXISTS permissions;
CREATE TABLE permissions (
                             id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                             permission_name VARCHAR(50) UNIQUE NOT NULL COMMENT '权限名称（唯一）',
                             create_time DATETIME NOT NULL COMMENT '创建时间',
                             update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='权限表，定义系统权限项';

-- =========================================
-- 9. 角色权限表（role_permission）：关联角色和权限
-- =========================================
DROP TABLE IF EXISTS role_permission;
CREATE TABLE role_permission (
                                 id INT PRIMARY KEY AUTO_INCREMENT COMMENT '主键，自增ID',
                                 role_id INT NOT NULL COMMENT '角色ID（关联roles表）',
                                 permission_id INT NOT NULL COMMENT '权限ID（关联permissions表）',
                                 create_time DATETIME NOT NULL COMMENT '创建时间',
                                 update_time DATETIME NOT NULL COMMENT '最后更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='角色权限表，定义角色拥有哪些权限';


-- 角色表数据
INSERT INTO roles (role_name, create_time, update_time) VALUES
    ('经理', '2025-01-01 09:00:00', '2025-01-01 09:00:00'),
    ('店长', '2025-01-01 09:00:00', '2025-01-01 09:00:00'),
    ('店员', '2025-01-01 09:00:00', '2025-01-01 09:00:00');

-- 货品表数据 - 包含关键词：手机、耳机、电脑、平板、手表、游戏机等
INSERT INTO products (name, purchase_price, wholesale_price, retail_price, create_time, update_time) VALUES
    ('苹果 iPhone 15 Pro 手机 256G', 6500.00, 7800.00, 8999.00, '2025-01-10 14:20:00', '2025-06-15 10:30:00'),
    ('华为 Mate 60 Pro 5G手机', 5200.00, 6200.00, 6999.00, '2025-01-12 09:15:00', '2025-07-20 16:45:00'),
    ('小米 14 Ultra 拍照手机', 3800.00, 4500.00, 5299.00, '2025-02-05 11:30:00', '2025-08-10 14:20:00'),
    ('三星 S24 Ultra 智能手机', 5800.00, 6900.00, 7999.00, '2025-02-15 13:45:00', '2025-07-25 09:15:00'),
    ('苹果 AirPods Pro 2 无线耳机', 1250.00, 1550.00, 1899.00, '2025-03-08 10:20:00', '2025-08-18 16:30:00'),
    ('索尼 WH-1000XM5 降噪耳机', 1800.00, 2200.00, 2599.00, '2025-03-12 15:40:00', '2025-09-05 11:25:00'),
    ('华为 FreeBuds Pro 3 蓝牙耳机', 850.00, 1050.00, 1299.00, '2025-04-02 08:50:00', '2025-09-12 14:35:00'),
    ('苹果 MacBook Air M2 笔记本电脑', 7200.00, 8600.00, 9999.00, '2025-04-10 12:15:00', '2025-10-08 10:40:00'),
    ('华为 MateBook 14 轻薄笔记本', 5200.00, 6300.00, 7499.00, '2025-05-06 14:30:00', '2025-10-15 13:20:00'),
    ('联想 ThinkPad X1 商务电脑', 5800.00, 6900.00, 7999.00, '2025-05-18 16:45:00', '2025-10-10 15:10:00'),
    ('苹果 iPad Air 5 平板电脑', 3400.00, 4100.00, 4899.00, '2025-06-03 09:20:00', '2025-09-05 12:30:00'),
    ('华为 MatePad Pro 13.2 平板', 3800.00, 4600.00, 5499.00, '2025-06-12 11:35:00', '2025-09-12 14:45:00'),
    ('小米平板 6 Max 大屏平板', 2800.00, 3400.00, 4199.00, '2025-07-08 13:50:00', '2025-10-01 16:20:00'),
    ('苹果 Watch Series 9 智能手表', 2200.00, 2700.00, 3199.00, '2025-07-20 15:25:00', '2025-10-10 09:35:00'),
    ('华为 Watch GT4 运动手表', 900.00, 1150.00, 1499.00, '2025-08-05 10:40:00', '2025-10-15 11:50:00'),
    ('任天堂 Switch OLED 游戏机', 1800.00, 2200.00, 2599.00, '2025-08-15 12:55:00', '2025-10-08 13:15:00'),
    ('索尼 PS5 Slim 游戏主机', 2800.00, 3400.00, 3899.00, '2025-09-03 14:10:00', '2025-10-12 15:40:00'),
    ('小米手环 8 Pro 智能手环', 350.00, 450.00, 599.00, '2025-09-12 16:25:00', '2025-10-05 17:05:00'),
    ('佳能 EOS R50 微单相机', 4200.00, 5100.00, 5999.00, '2025-10-08 08:30:00', '2025-10-15 10:25:00'),
    ('大疆 Mini 4 Pro 无人机', 3800.00, 4600.00, 5399.00, '2025-10-12 10:45:00', '2025-10-17 12:50:00');

-- 客户表数据 (type: 0-批发, 1-零售)
INSERT INTO customers (name, type, phone, address, create_time, update_time) VALUES
    ('北京华联超市', 0, '13800138001', '北京市朝阳区建国门外大街1号', '2025-01-08 09:15:00', '2025-06-12 14:30:00'),
    ('上海联华连锁', 0, '13900139002', '上海市浦东新区陆家嘴金融中心', '2025-01-15 10:20:00', '2025-07-18 16:45:00'),
    ('广州友谊商店', 0, '13700137003', '广州市天河区天河路228号', '2025-02-05 11:25:00', '2025-08-22 09:10:00'),
    ('深圳天虹商场', 0, '13600136004', '深圳市福田区华强北路101号', '2025-02-12 13:40:00', '2025-09-05 11:35:00'),
    ('成都伊藤洋华堂', 0, '13500135005', '成都市锦江区春熙路128号', '2025-03-10 15:55:00', '2025-10-08 13:50:00'),
    ('南京金鹰国际', 0, '13400134006', '南京市秦淮区中山南路89号', '2025-03-18 08:30:00', '2025-09-15 15:05:00'),
    ('杭州银泰百货', 0, '13300133007', '杭州市下城区延安路530号', '2025-04-05 10:45:00', '2025-09-12 16:20:00'),
    ('武汉武商集团', 0, '13200132008', '武汉市江汉区解放大道688号', '2025-04-12 12:00:00', '2025-10-05 10:35:00'),
    ('西安开元商城', 0, '13100131009', '西安市碑林区东大街解放市场6号', '2025-05-08 14:15:00', '2025-10-08 12:50:00'),
    ('重庆新世纪百货', 0, '13000130010', '重庆市渝中区民族路166号', '2025-05-15 16:30:00', '2025-10-12 14:05:00'),
    ('张三', 1, '15800158011', '北京市海淀区中关村大街15号', '2025-06-03 09:45:00', '2025-09-05 15:40:00'),
    ('李四', 1, '15900159012', '上海市徐汇区漕溪北路1200号', '2025-06-10 11:00:00', '2025-09-12 17:15:00'),
    ('王五', 1, '15700157013', '广州市越秀区中山五路219号', '2025-07-05 13:15:00', '2025-10-10 09:30:00'),
    ('赵六', 1, '15600156014', '深圳市南山区科技园南区', '2025-07-12 15:30:00', '2025-10-15 11:45:00'),
    ('钱七', 1, '15500155015', '成都市武侯区人民南路四段19号', '2025-08-08 08:45:00', '2025-10-08 13:00:00'),
    ('孙八', 1, '15400154016', '南京市鼓楼区中山北路30号', '2025-08-15 10:00:00', '2025-10-12 14:15:00'),
    ('周九', 1, '15300153017', '杭州市西湖区文三路259号', '2025-09-03 12:15:00', '2025-10-10 15:30:00'),
    ('吴十', 1, '15200152018', '武汉市武昌区中南路9号', '2025-09-10 14:30:00', '2025-10-15 16:45:00'),
    ('郑十一', 1, '15100151019', '西安市雁塔区小寨西路26号', '2025-09-18 16:45:00', '2025-10-12 18:00:00'),
    ('王十二', 1, '15000150020', '重庆市渝北区新牌坊一路', '2025-10-05 09:00:00', '2025-10-16 10:15:00');

-- 仓库表数据
INSERT INTO warehouses (name, phone, address, create_time, update_time) VALUES
    ('北京中央仓库', '010-88880001', '北京市通州区物流基地一号', '2025-01-05 08:30:00', '2025-06-10 14:20:00'),
    ('上海浦东仓库', '021-68880002', '上海市浦东新区金桥出口加工区', '2025-01-12 09:45:00', '2025-07-15 16:35:00'),
    ('广州天河仓库', '020-38880003', '广州市天河区科韵路信息港', '2025-02-03 10:20:00', '2025-08-18 09:10:00'),
    ('深圳南山仓库', '0755-28880004', '深圳市南山区科技园北区', '2025-02-10 11:35:00', '2025-09-12 11:25:00'),
    ('成都武侯仓库', '028-68880005', '成都市武侯区人民南路四段', '2025-03-08 13:50:00', '2025-10-05 13:40:00'),
    ('南京鼓楼仓库', '025-58880006', '南京市鼓楼区中山北路', '2025-03-15 14:05:00', '2025-09-20 15:30:00'),
    ('杭州西湖仓库', '0571-48880007', '杭州市西湖区文三路', '2025-04-03 15:20:00', '2025-09-25 17:15:00'),
    ('武汉江汉仓库', '027-38880008', '武汉市江汉区建设大道', '2025-04-10 16:35:00', '2025-10-08 09:20:00'),
    ('西安雁塔仓库', '029-28880009', '西安市雁塔区小寨西路', '2025-05-05 08:50:00', '2025-10-10 11:05:00'),
    ('重庆渝北仓库', '023-18880010', '重庆市渝北区新牌坊', '2025-05-12 10:05:00', '2025-10-12 13:20:00'),
    ('北京朝阳分仓', '010-88880011', '北京市朝阳区望京商务区', '2025-06-01 11:20:00', '2025-09-08 15:35:00'),
    ('上海虹桥分仓', '021-68880012', '上海市长宁区虹桥临空园区', '2025-06-08 12:35:00', '2025-09-15 17:50:00'),
    ('广州番禺分仓', '020-38880013', '广州市番禺区南村万博', '2025-07-03 13:50:00', '2025-10-05 10:05:00'),
    ('深圳宝安分仓', '0755-28880014', '深圳市宝安区福永物流园', '2025-07-10 15:05:00', '2025-10-10 12:20:00'),
    ('成都高新分仓', '028-68880015', '成都市高新区天府软件园', '2025-08-05 16:20:00', '2025-10-12 14:35:00'),
    ('南京江宁分仓', '025-58880016', '南京市江宁区科学园', '2025-08-12 08:35:00', '2025-10-08 16:50:00'),
    ('杭州滨江分仓', '0571-48880017', '杭州市滨江区物联网街', '2025-09-01 09:50:00', '2025-10-15 09:05:00'),
    ('武汉光谷分仓', '027-38880018', '武汉市东湖高新区光谷', '2025-09-08 11:05:00', '2025-10-12 11:20:00'),
    ('西安高新分仓', '029-28880019', '西安市高新区锦业路', '2025-09-15 12:20:00', '2025-10-10 13:35:00'),
    ('重庆江北分仓', '023-18880020', '重庆市江北区观音桥', '2025-10-03 13:35:00', '2025-10-17 15:50:00');

-- 库存表数据
INSERT INTO inventory (product_id, warehouse_id, quantity, create_time, update_time) VALUES
    (1, 1, 50, '2025-01-20 10:15:00', '2025-06-25 14:30:00'),
    (2, 2, 30, '2025-01-25 11:30:00', '2025-07-30 16:45:00'),
    (3, 3, 40, '2025-02-10 12:45:00', '2025-08-15 09:00:00'),
    (4, 4, 25, '2025-02-18 13:20:00', '2025-09-10 11:15:00'),
    (5, 5, 60, '2025-03-15 14:35:00', '2025-10-12 13:30:00'),
    (6, 6, 35, '2025-03-22 15:50:00', '2025-09-25 15:45:00'),
    (7, 7, 45, '2025-04-08 09:05:00', '2025-09-18 17:00:00'),
    (8, 8, 20, '2025-04-15 10:20:00', '2025-10-10 10:15:00'),
    (9, 9, 55, '2025-05-12 11:35:00', '2025-10-15 12:30:00'),
    (10, 10, 30, '2025-05-20 12:50:00', '2025-10-12 14:45:00'),
    (11, 11, 40, '2025-06-10 13:25:00', '2025-09-12 16:00:00'),
    (12, 12, 50, '2025-06-18 14:40:00', '2025-09-20 09:15:00'),
    (13, 13, 35, '2025-07-10 15:55:00', '2025-10-08 11:30:00'),
    (14, 14, 25, '2025-07-18 16:10:00', '2025-10-12 13:45:00'),
    (15, 15, 45, '2025-08-12 08:25:00', '2025-10-10 15:00:00'),
    (16, 16, 60, '2025-08-20 09:40:00', '2025-10-08 17:15:00'),
    (17, 17, 30, '2025-09-08 10:55:00', '2025-10-15 10:30:00'),
    (18, 18, 40, '2025-09-15 12:10:00', '2025-10-12 12:45:00'),
    (19, 19, 20, '2025-10-05 13:25:00', '2025-10-16 15:00:00'),
    (20, 20, 35, '2025-10-10 14:40:00', '2025-10-17 17:15:00');

-- 销售单表数据 (type: 0-批发, 1-零售; status: 0-草稿,1-已审核,2-已收款,3-已退货)
INSERT INTO orders (customer_id, product_id, warehouse_id, quantity, type, total_price, status, create_time, update_time) VALUES
    (1, 1, 1, 5, 0, 39000.00, 2, '2025-02-05 09:15:00', '2025-02-10 14:30:00'),
    (11, 2, 2, 1, 1, 6999.00, 2, '2025-02-12 10:20:00', '2025-02-15 16:45:00'),
    (2, 3, 3, 10, 0, 45000.00, 1, '2025-03-08 11:25:00', '2025-03-12 09:10:00'),
    (12, 4, 4, 1, 1, 7999.00, 2, '2025-03-15 13:40:00', '2025-03-18 11:35:00'),
    (3, 5, 5, 20, 0, 31000.00, 2, '2025-04-10 15:55:00', '2025-04-15 13:50:00'),
    (13, 6, 6, 1, 1, 2599.00, 2, '2025-04-18 08:30:00', '2025-04-20 15:05:00'),
    (4, 7, 7, 15, 0, 15750.00, 1, '2025-05-05 10:45:00', '2025-05-08 16:20:00'),
    (14, 8, 8, 1, 1, 9999.00, 0, '2025-05-12 12:00:00', '2025-05-12 12:00:00'),
    (5, 9, 9, 8, 0, 50400.00, 2, '2025-06-08 14:15:00', '2025-06-12 12:50:00'),
    (15, 10, 10, 1, 1, 7999.00, 2, '2025-06-15 16:30:00', '2025-06-18 14:05:00'),
    (6, 11, 11, 12, 0, 49200.00, 1, '2025-07-03 09:45:00', '2025-07-08 15:40:00'),
    (16, 12, 12, 1, 1, 5499.00, 2, '2025-07-10 11:00:00', '2025-07-12 17:15:00'),
    (7, 13, 13, 18, 0, 61200.00, 2, '2025-08-05 13:15:00', '2025-08-10 09:30:00'),
    (17, 14, 14, 1, 1, 3199.00, 2, '2025-08-12 15:30:00', '2025-08-15 11:45:00'),
    (8, 15, 15, 25, 0, 28750.00, 1, '2025-09-08 08:45:00', '2025-09-12 13:00:00'),
    (18, 16, 16, 1, 1, 2599.00, 3, '2025-09-15 10:00:00', '2025-09-20 14:15:00'),
    (9, 17, 17, 6, 0, 20400.00, 2, '2025-10-03 12:15:00', '2025-10-08 15:30:00'),
    (19, 18, 18, 1, 1, 599.00, 2, '2025-10-10 14:30:00', '2025-10-12 16:45:00'),
    (10, 19, 19, 3, 0, 15300.00, 0, '2025-10-12 16:45:00', '2025-10-12 16:45:00'),
    (20, 20, 20, 1, 1, 5399.00, 1, '2025-10-15 09:00:00', '2025-10-16 10:15:00');

